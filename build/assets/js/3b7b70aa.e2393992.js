/*! For license information please see 3b7b70aa.e2393992.js.LICENSE.txt */
"use strict";(self.webpackChunkweb_totals=self.webpackChunkweb_totals||[]).push([[3663],{30489:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>i,contentTitle:()=>s,default:()=>u,frontMatter:()=>c,metadata:()=>a,toc:()=>l});var o=n(85893),r=n(11151);const c={title:"React Provider Hell",authors:"hunghg",tags:["react","provider"],image:"https://res.cloudinary.com/practicaldev/image/fetch/s--HOQYtEP_--/c_imagga_scale,f_auto,fl_progressive,h_900,q_auto,w_1600/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kj81kq4qurtf84xrvtm8.png"},s=void 0,a={permalink:"/blog/react-provider-hell",editUrl:"https://github.com/hunghg255/web-totals/tree/main/blog/react-provider-hell.md",source:"@site/blog/react-provider-hell.md",title:"React Provider Hell",description:"React Provider Hell",date:"2023-09-19T19:28:57.000Z",formattedDate:"September 19, 2023",tags:[{label:"react",permalink:"/blog/tags/react"},{label:"provider",permalink:"/blog/tags/provider"}],readingTime:1.18,hasTruncateMarker:!0,authors:[{name:"Gia Hung",title:"Creator of Web totals",url:"https://github.com/hunghg255",email:"giahung197bg@gmail.com",imageURL:"https://res.cloudinary.com/hunghg255/image/upload/v1654956015/Screen_Shot_2022-06-07_at_11.25.34_bpnymt.png",key:"hunghg"}],frontMatter:{title:"React Provider Hell",authors:"hunghg",tags:["react","provider"],image:"https://res.cloudinary.com/practicaldev/image/fetch/s--HOQYtEP_--/c_imagga_scale,f_auto,fl_progressive,h_900,q_auto,w_1600/https://dev-to-uploads.s3.amazonaws.com/uploads/articles/kj81kq4qurtf84xrvtm8.png"},unlisted:!1,prevItem:{title:"SVG icon with pure css",permalink:"/blog/svg-icon-with-pure-css"},nextItem:{title:"Example Callstack And Event loop",permalink:"/blog/event-loop-call-stack-example"}},i={authorsImageUrls:[void 0]},l=[{value:"Issue",id:"issue",level:2},{value:"Solution",id:"solution",level:2}];function v(e){const t={code:"code",h2:"h2",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.p,{children:"React Provider Hell"}),"\n",(0,o.jsx)(t.h2,{id:"issue",children:"Issue"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",metastring:"live noInline",live:!0,children:"const context1 = createContext({});\nconst context2 = createContext({});\nconst context3 = createContext({});\nconst context4 = createContext({});\n\nconst ChildApp = () => {\n  const v1 = useContext(context1);\n  const v2 = useContext(context2);\n  const v3 = useContext(context3);\n  const v4 = useContext(context4);\n\n  return (\n    <>\n      <h2>ChildApp</h2>\n      {v1.v}\n      {v2.v}\n      {v3.v}\n      {v4.v}\n    </>\n  );\n};\n\nconst App = () => {\n  return (\n    <>\n      <context1.Provider value={{ v: 1 }}>\n        <context2.Provider value={{ v: 2 }}>\n          <context3.Provider value={{ v: 3 }}>\n            <context4.Provider value={{ v: 4 }}>\n              <ChildApp />\n            </context4.Provider>\n          </context3.Provider>\n        </context2.Provider>\n      </context1.Provider>\n    </>\n  );\n};\n\nrender(<App />);\n"})}),"\n",(0,o.jsx)(t.h2,{id:"solution",children:"Solution"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-jsx",metastring:"live noInline",live:!0,children:"const context1 = createContext({});\nconst context2 = createContext({});\nconst context3 = createContext({});\nconst context4 = createContext({});\n\nconst ChildApp = () => {\n  const v1 = useContext(context1);\n  const v2 = useContext(context2);\n  const v3 = useContext(context3);\n  const v4 = useContext(context4);\n\n  return (\n    <>\n      <h2>ChildApp</h2>\n      {v1.v}\n      {v2.v}\n      {v3.v}\n      {v4.v}\n    </>\n  );\n};\n\nconst buildProvidersTree = (componentWithProps = []) => {\n  return ({ children }) => {\n    return componentWithProps.reduceRight((acc, [Provider, props]) => {\n      return <Provider {...props}>{acc}</Provider>;\n    }, children);\n  };\n};\n\nconst ProvidersTree = buildProvidersTree([\n  [context1.Provider, { value: { v: 1 } }],\n  [context2.Provider, { value: { v: 2 } }],\n  [context3.Provider, { value: { v: 3 } }],\n  [context4.Provider, { value: { v: 4 } }],\n]);\n\nconst App = () => {\n  return (\n    <>\n      <ProvidersTree>\n        <ChildApp />\n      </ProvidersTree>\n    </>\n  );\n};\n\nrender(<App />);\n"})})]})}function u(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(v,{...e})}):v(e)}},75251:(e,t,n)=>{var o=n(67294),r=Symbol.for("react.element"),c=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,n){var o,c={},l=null,v=null;for(o in void 0!==n&&(l=""+n),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(v=t.ref),t)s.call(t,o)&&!i.hasOwnProperty(o)&&(c[o]=t[o]);if(e&&e.defaultProps)for(o in t=e.defaultProps)void 0===c[o]&&(c[o]=t[o]);return{$$typeof:r,type:e,key:l,ref:v,props:c,_owner:a.current}}t.Fragment=c,t.jsx=l,t.jsxs=l},85893:(e,t,n)=>{e.exports=n(75251)},11151:(e,t,n)=>{n.d(t,{Z:()=>a,a:()=>s});var o=n(67294);const r={},c=o.createContext(r);function s(e){const t=o.useContext(c);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:s(e.components),o.createElement(c.Provider,{value:t},e.children)}}}]);